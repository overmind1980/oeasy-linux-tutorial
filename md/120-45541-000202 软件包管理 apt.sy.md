---
show: step
version: 1.0
enable_checker: true
---

# æœ¬ç« å›é¡¾

## æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ ğŸ˜Œ

> ä¸Šä¸€éƒ¨åˆ†æˆ‘ä»¬éƒ½è®²äº†ä»€ä¹ˆï¼ŸğŸ¤”

- yes å‘½ä»¤
- æŒç»­è¾“å‡ºæŸå­—ç¬¦ä¸²

```shell
yes oeasy
```

**è¿˜æœ‰ä»€ä¹ˆå¥½ç©çš„å‘½ä»¤å—ï¼Ÿ**ğŸ¤”

## åˆ—å‡ºæ‰€æœ‰åŒ…

```shell
apt list
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631245029533)

- å¥½å¤šæ–‡ä»¶å•Š
- èƒ½æ‰¾åˆ°yeså‘½ä»¤ä¹ˆï¼Ÿ
- æ‰¾ä¸åˆ°å•Š


### dpkg


```shell
# æ‰¾åˆ° yes å¯¹åº”ä½ç½®
which yes
# /usr/bin/yes å±äºå“ªä¸ªåŒ…
dpkg -S /usr/bin/yes
# åœ¨å·²ç»å®‰è£…çš„åŒ…é‡Œé¢æ‰¾åˆ° coreutils
# coreutils åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ
dpkg -l coreutils
# åœ¨å·²å®‰è£…åˆ—è¡¨ä¸­æœç´¢ coreutilsçš„çŠ¶æ€
dpkg -s coreutils
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631245089560)

- yeså‘½ä»¤ å±äº coreutilsåŒ… 
- ä½ æ€ä¹ˆçŸ¥é“è¿™ä¹ˆå¤šdpkgå‘½ä»¤çš„é€‰é¡¹å‘¢ï¼Ÿ

### æŸ¥çœ‹å¸®åŠ©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634464535230)

- é‚£ä¹ˆå…·ä½“ä»€ä¹ˆæ˜¯coreutilså‘¢ï¼Ÿ

### coreutils

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634464663520)

- coreæ˜¯æ ¸å¿ƒ
- utilæ˜¯utilityåº”ç”¨
- å¯¹åº”ä¸€äº›æ ¸å¿ƒåº”ç”¨
- æ˜¯gnuåˆ¶ä½œçš„linuxå†…æ ¸ä¹‹ä¸Šçš„ä¸€å±‚
- å¸¸ç”¨çš„å‘½ä»¤éƒ½åœ¨è¿™é‡Œ
- éƒ½æœ‰å“ªäº›å‘½ä»¤å‘¢ï¼Ÿ

### åŒ…çš„ç»†èŠ‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634465116706)

- https://wiki.debian.org/coreutils
- catã€lsã€cpã€mvã€rmã€mkdiréƒ½å±äºè¿™ä¸ªåŒ…

### æ–°çš„åŒ…ç®¡ç†æ–¹å¼

- dpkg å¯¹åº” Debian Package æ˜¯ä¼ ç»ŸåŒ…ç®¡ç†
- dpkg æ›´å¤šçš„æ˜¯æœ¬åœ°åŒ…çš„å„ç§å®‰è£…å¸è½½æŸ¥çœ‹
- æ—©å¹´é—´éƒ½æ˜¯é€šè¿‡ ftp ä¸‹è½½åˆ°æœ¬åœ°
- å† dkpg å®‰è£…
- ç°åœ¨æœ‰httpäº†
- ç”¨ aptå‘½ä»¤

### apt
```
apt list coreutils
# åœ¨æºä¸­æœç´¢ coreutils
apt search coreutils
```

- apt æ˜¯æ–°çš„åŒ…ç®¡ç†å·¥å…· ğŸ˜
- apt æ˜¯ advanced package tools çš„æ„æ€
- apt æ˜¯ debian ç³»å‘è¡Œç‰ˆçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·

### aptğŸ§©

- å…¶ä»–å®¶æ—åŒ…ç®¡ç†
	- çº¢å¸½ç³»çš„ yum
	- arch ç³»çš„ pacman 
	- ä¹Ÿæ˜¯å¾ˆå¥½çš„ç®¡ç†å·¥å…·
- å¦‚æœæœ‰äº›åŒ…ä½ æ˜¯ä»çº¢å¸½ç³» rpm ä¸‹è½½çš„
  - å¯ä»¥ç”¨ alien è½¬åŒ–ä¸º deb
  - ç„¶åå®‰è£… deb æ–‡ä»¶
- é‚£ä¹ˆå¯ä»¥ç”¨ apt ä¸‹å¥½ç©çš„åŒ…å—ï¼ŸğŸ˜‚


### ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ªå·¥å…· ğŸ”§

- ä¸åŒçš„ cpu æ¶æ„è¦ç”¨ä¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶
- ä½ å¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•å¾—åˆ°æŸç§æ¶æ„ï¼ˆæ¯”å¦‚ mips) çš„äºŒè¿›åˆ¶æ–‡ä»¶
  - ç›´æ¥ä¸‹è½½è¿™ä¸ªæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
  - ä¸‹è½½è¿™ä¸ªè½¯ä»¶åŒ…çš„æºæ–‡ä»¶ï¼Œè‡ªå·±ç¼–è¯‘ âš™ï¸

**ä½†æ˜¯è¿™ä¸ªå¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶è¿˜æ˜¯æœ‰å¯èƒ½ä¸èƒ½ç”¨**

### å·¥å…·é“¾

#### å¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸èƒ½ç”¨

è½¯ä»¶åŒ…ä¹‹é—´æ˜¯æœ‰ä¾èµ–å…³ç³»çš„ï¼Œè¿™ä¸ªè½¯ä»¶åŒ…ä¾èµ–çš„è½¯ä»¶åŒ…ä¸å­˜åœ¨ï¼Œç”šè‡³è¢«ä¾èµ–çš„è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„è½¯ä»¶åŒ…ä¸å­˜åœ¨ï¼Œè¿™å°±å½¢æˆäº†ä¸€æ¡é“¾è·¯ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠè¿™æ¡é“¾è·¯ä¸Šæ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½ä¸‹è½½ä¸‹æ¥ã€‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634465711818)

### ä¸‹è½½

#### æœ‰æ²¡æœ‰æ›´ä¾¿æ·çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥

- ä½¿ç”¨ apt æŠŠç›¸å…³ä¸‹è½½æ“ä½œå°è£…æˆæ¥å£
- æˆ‘ä»¬ç›´æ¥è°ƒç”¨ apt å°±å¯ä»¥äº†
- ä¸ä½†ä¸‹è½½ä½ è¦æ±‚ä¸‹è½½çš„äºŒè¿›åˆ¶æ–‡ä»¶
- è€Œä¸”ä¸‹è½½è¿è¡Œè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶éœ€è¦çš„å·¥å…·é“¾ä¸Šç›¸å…³çš„äºŒè¿›åˆ¶æ–‡ä»¶
- æ‰€ä»¥å«åšé«˜çº§åŒ…ç®¡ç†å·¥å…·
- é«˜çº§å°±é«˜çº§åœ¨è¿™äº†
- å½“ç„¶ä½ å¾—æœ‰åœ°æ–¹ä¸‹è½½
- ä¸‹è½½çš„åœ°æ–¹å°±æ˜¯é•œåƒç«™

### é•œåƒç«™ (mirrors)

- æˆ‘ä»¬å¯ä»¥è‡ªå·±è®¿é—® [debian ç³»çš„é•œè±¡åˆ—è¡¨](https://www.debian.org/mirror/list) æŸ¥çœ‹å„åœ°çš„é•œåƒåˆ—è¡¨
- æˆ‘ä»¬è‡ªå·±çš„é•œåƒæºè®¾ç½®åœ¨ `/etc/apt/sources.list`
- cat /etc/apt/sources.list å»è§‚å¯Ÿ


- **é•œåƒç«™ä¸€èˆ¬ä¹Ÿä¸åªæä¾›ä¸€ä¸ªå‘è¡Œç‰ˆçš„é•œåƒã€‚**
- é™¤äº†debianå¯èƒ½è¿˜æœ‰rhel

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631245850086)

### æ¸…åæº

- ä»¥ [æ¸…åé•œåƒç«™](https://mirror.tuna.tsinghua.edu.cn/) ä¸ºä¾‹ï¼š
  - æœ‰å¥½å¤šå‘è¡Œç‰ˆ
  - ç‚¹å‡»å‘è¡Œç‰ˆæˆ–è½¯ä»¶åŒ…åé¢é—®å·
  - å¯ä»¥è·å¾— `sources.list` çš„ç›¸å…³æ¸…åæºé…ç½®ä»£ç 

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/mirror.png)

### ç‰ˆæœ¬é€‰æ‹©

- è¿™é‡Œæœ‰ä¸åŒç‰ˆæœ¬
- åº”è¯¥é€‰å“ªä¸ªå‘¢ï¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634466482300)

### ä¸»è¦ç‰ˆæœ¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634466549852)

- ä¸»è¦ä¸‰ä¸ªç‰ˆæœ¬
	- stable
	- testing
	- unstable
- è¿™ä¸‰ä¸ªä¸œè¥¿æ˜¯éšç€æ—¶é—´æ¨è¿›æ°´æ¶¨èˆ¹é«˜çš„
- ä¹Ÿå°±æ˜¯è¯´å…¶å®ä¸åŒé˜¶æ®µå¯¹åº”ä¸åŒçš„å…·ä½“ç‰ˆæœ¬
- é‚£æˆ‘æ€ä¹ˆçŸ¥é“ç›®å‰æˆ‘çš„è¿™çš„debianæ˜¯ä»€ä¹ˆç‰ˆæœ¬å‘¢ï¼Ÿ

### å…·ä½“ç‰ˆæœ¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634466720165)

### å½“å‰ç³»ç»Ÿç‰ˆæœ¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634466888544)

- å½“å‰çš„ç³»ç»Ÿæ˜¯ubuntu16
- å¯¹åº”çš„debianç‰ˆæœ¬æ˜¯9(stretch)
- å½“æ—¶è¿˜æ˜¯sidä¸ç¨³å®šç‰ˆ
- ä¸ºä»€ä¹ˆå«åšstretchå‘¢ï¼Ÿ

### stretch

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634467511937)

- è¿™ä¸ªåå­—æ¥è‡ªäºç©å…·æ€»åŠ¨å‘˜3
- Debianç‰ˆæœ¬çš„åå­—å¤§å¤šæ¥è‡ªäºç©å…·æ€»åŠ¨å‘˜

### ç©å…·æ€»åŠ¨å‘˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634467613830)

- å¾ˆæœ‰è¶£ 
- ä¸æ˜¯ä¹ˆï¼Ÿ
- é™¤äº†æ¸…åæºä¹‹å¤–ï¼Œé˜¿é‡Œæºã€è…¾è®¯æºä¹Ÿç±»ä¼¼
- ä¸€èˆ¬æ¥è¯´å’Œä½ è‡ªå·±è½»é‡äº‘æä¾›å•†æœ‰å…³

### é˜¿é‡Œæº

- å®éªŒæ¥¼é‡Œé¢é»˜è®¤çš„æ˜¯é˜¿é‡Œæºä¹Ÿå¾ˆå¥½ç”¨
- æˆ‘ä»¬è¦ä¸‹è½½ä¸€ä¸ªåº”ç”¨ linuxlogo
- æˆ‘å…ˆçœ‹çœ‹æˆ‘è®¾ç½®çš„è¿™äº›æºğŸ¤ª

### sources.listğŸ—’

**sources.list è¯­æ³•æ˜¯è¿™æ ·çš„ï¼š**

- deb url distribution component1 component2 component3 [..] componentX
- deb-src url distribution component1 component2 component3 [..] componentX
- deb å¯¹åº”äºŒè¿›åˆ¶æ–‡ä»¶
- deb-src å¯¹åº”æºæ–‡ä»¶
- åœ¨åœ°å€åé¢æœ‰ä¸ªç‰ˆæœ¬å·
- ç‰ˆæœ¬åœ¨ dists(distribution) é‡Œé¢å¯ä»¥æ‰¾åˆ°
  - <https://mirror.tuna.tsinghua.edu.cn/debian/dists/>
  - debian ç³»åˆ—ç‰ˆæœ¬å·éƒ½æ˜¯ç©å…·æ€»åŠ¨å‘˜ä¸­çš„è§’è‰²
  - ubuntu ç‰ˆæœ¬å·æ¥è‡ªäºåŠ¨ç‰© ğŸ¦Š
  - mainã€contribute æ˜¯æ–‡ä»¶å¤¹çš„åå­—
  - Buster ç‰ˆæ˜¯æœ€æ–°çš„ç¨³å®šç‰ˆï¼Œé€‚åˆæ‹¿æ¥ä½¿ç”¨
- ç»´æŠ¤è€…ç»´æŠ¤çš„æºå¤´æ˜¯æºæ–‡ä»¶
  - æœ‰äº†æºæ–‡ä»¶ï¼Œå¯ä»¥ç¼–è¯‘æˆåˆ°å„ç§æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
  - ä¿®æ”¹ä¹Ÿæ˜¯ï¼Œå…ˆä¿®æ”¹æºæ–‡ä»¶

### å‘¨æœŸ
- å„ç§ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸ

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/release-cycle.png)

### packageğŸ

**è½¯ä»¶åŒ…å‘å¸ƒçš„è¿‡ç¨‹ç”Ÿå‘½å‘¨æœŸï¼š**

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/package-lifecycle.png)

### æŸ¥æ‰¾å’Œä¸‹è½½å®‰è£…

```shell
# æœç´¢æºé‡Œé¢æœ‰æ²¡æœ‰ linuxlogo è¿™ä¸ªè½¯ä»¶åŒ…
apt search linuxlogo
# çœ‹çœ‹é•œåƒç«™ä¸Šé¢å¯¹äºè¿™ä¸ªè½¯ä»¶åŒ…çš„æè¿°
apt show linuxlogo
# ä¸‹è½½å®‰è£…è¿™ä¸ªè½¯ä»¶åŒ…
sudo apt install linuxlogo
```

- `search` æŸ¥æ‰¾åˆ°ä½ çš„å½“å‰æ¶æ„æ˜¯å¦å¯ä»¥æœ‰è¿™ä¸ªè½¯ä»¶åŒ…
- `show` æ˜¾ç¤ºå¼€å‘è€… ç®€ä»‹ å¤§å° æ‰€åœ¨çš„æºçš„ä½ç½®
  - æˆ‘ä»¬å¯ä»¥ `apt show apt` çœ‹çœ‹ apt çš„ä¾èµ–å…³ç³»
  - (A æˆ– B) ä¸” C çš„å…³ç³»å†™ä½œ A | B, C
- ç¬¬ä¸‰æ¡æ‰§è¡Œä¸ä¸‹å»ï¼Œå› ä¸ºæ²¡æœ‰æƒé™
- è¿™å¾ˆæ˜¾ç„¶ 
- éœ€è¦sudo
- åäº‹å¦‚ä½•å‘¢ï¼ŸğŸ¤” 
- ä¸”å¬ä¸‹ä¸ªå®éªŒå†åˆ†è§£ï¼ğŸ‘‹
