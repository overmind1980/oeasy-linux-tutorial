---
show: step
version: 1.0
enable_checker: true
---

# åŠ¨æ€ç½‘ç«™tomcat+æ•°æ®åº“postgres

## æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ ğŸ˜Œ

- æˆ‘ä»¬ä¸Šæ¬¡æ­å»ºäº†tomcat
- è¿è¡Œäº†èµ·æ¥
- åœ¨é‡Œé¢å»ºç«‹äº†è‡ªå·±çš„web application
	- oeasy
- è®¾ç½®å¥½äº†WEB-INF
	- web.xml
	- classes
- ç„¶åå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­åŠ¨æ€çš„æ˜¾ç¤ºä¿¡æ¯äº†
- å…¶å®æˆ‘æƒ³è®¿é—®æ•°æ®åº“é‡Œé¢çš„ä¿¡æ¯
- å¯èƒ½ä¹ˆï¼ŸğŸ¤”
- å…ˆé‡å¤åœ°å†é€ ä¸€ä¸ªserlet

### æ–°servlet
- æ‰¾åˆ°ç›®å½•ä½ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631438956654)

- å°è¯•æŠŠHelloWorlExample.javaå¤åˆ¶ä¸€ä»½
- å¹¶è¿›è¡Œä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631438684220)

### ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631439046442)

- public classçš„åå­—åº”è¯¥å’Œæ–‡ä»¶åä¸€è‡´
- ä¿å­˜å¹¶é€€å‡º

### ç¼–è¯‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631439204865)

- è®¾ç½®å¥½classpath
- ç¼–è¯‘javaæ–‡ä»¶ 
- ç¼–è¯‘æˆåŠŸ
- å‡ºç°äº†OeasyServlet.java
- å¦‚ä½•æŠŠè¿™ä¸ªclassæ˜ å°„åˆ°urlé‡Œé¢å‘¢ï¼Ÿ
- æ‰“å¼€web.xml

### å›é¡¾

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631406260957)

- ç°åœ¨æˆ‘ä»¬æœ‰äº†class
- éœ€è¦servlet name 
- æ˜ å°„åˆ°urlä¸Šå»
- å…·ä½“æ€ä¹ˆå†™å‘¢ï¼Ÿ

### web.xml
- æŠŠåŸæ¥çš„å†…å®¹å¤åˆ¶å‡ºä¸€ä»½æ¥
- ç„¶åä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631440296688)

### å¯åŠ¨

- é‡å¯tomcatè§‚å¯Ÿ
- é¡ºåˆ©æˆåŠŸ
- å¦‚æœæ²¡æœ‰æˆåŠŸçš„è¯
- ä¼šæœ‰é”™è¯¯æç¤º
- æ˜¯ä¸æ˜¯æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªurl-pattern
- æ˜¯ä¸æ˜¯æ²¡æœ‰è¿™ä¸ªservlet
- æ˜¯ä¸æ˜¯æ²¡æœ‰è¿™ä¸ªclass

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631440677288)

- é¡ºåˆ©å®Œæˆå
- æˆ‘å¸Œæœ›èƒ½ç”¨javaè®¿é—®postgresqlæ•°æ®åº“

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631441137230)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631441149209)

- æç¤ºéœ€è¦ä¸€ä¸ªpostgresql-jdbcé©±åŠ¨
- ç‚¹å‡»é“¾æ¥å»ä¸‹è½½

### ä¸‹è½½é©±åŠ¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631441201792)

- ä¸‹è½½postgresql jdbc 4.2 driver
- æˆ‘æŠŠä»–ä¼ åˆ°äº†githubå’Œgitee
- è¿›å…¥å’Œclasseså¹³çº§çš„libç›®å½•
- ä¸€èˆ¬è¿™é‡Œæ”¾ç½®liberies ç±»åº“
- git clone http://gitee.com/overmind1980/oeasyorg.git

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631442369128)

### å¼€å§‹ç¼–ç¨‹

- æŠŠä»£ç å¤åˆ¶ä¸‹æ¥
- ç„¶åå›åˆ°classes
- ç¼–è¾‘ä¸€ä¸ªjdbc.java

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631441680097)

- æ³¨æ„å…±æœ‰ç±»çš„ç±»åå’Œæ–‡ä»¶åä¸€è‡´
- å°è¯•ç¼–è¯‘

### ç¼–è¯‘è¿è¡Œ
- ç¼–è¯‘æ²¡æœ‰é‡åˆ°é—®é¢˜
- ä½†æ˜¯è¿è¡Œé‡åˆ°äº†é—®é¢˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631442463742)

- åŸæ¥æ˜¯postgresæ²¡å¼€

### å¯åŠ¨
- å¦‚æœæ²¡æœ‰è£…å¥½postgres
- å°±éœ€è¦å†é‡æ–°è£…ä¸€ä¸‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631442687451)

- è£…å¥½ä¹‹å
- ç”¨postgresè¿™ä¸ªç”¨æˆ·çš„èº«ä»½ç™»å½•psql
- å›å¿†ä¹‹å‰å»ºç«‹çš„database oeasy

### è¡¨æ ¼
- oeasyorgé‡Œé¢çš„urls.csvå»ºç«‹çš„æ˜¯urlsè¿™ä¸ªè¡¨
- è¡¨é‡Œé¢ä¸¤ä¸ªå­—æ®µ
	- topic
	- urls

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631443675676)

### å†æ¬¡ç¼–è¯‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631443734077)

- java -cp ../lib/postgres-xx.jar:$CLASSPATH jdbc
	- java æ˜¯è®©javaè™šæ‹Ÿæœºè¿è¡Œclassæ–‡ä»¶
	- æœ€åçš„jdbcæ˜¯classçš„åå­—
	- -cp ../lib/postgres-xx.jar:$CLASSPATH
		- -cpæ˜¯è®¾ç½®classpath
		- åé¢è·Ÿçš„./lib/postgres-xx.jar:$CLASSPATHæ˜¯å…·ä½“çš„classpath
		- :æ˜¯åˆ†éš”ç¬¦è¿™éƒ¨åˆ†æœ‰ä¸¤éƒ¨åˆ†
		- ./lib/postgres-xx.jar æ˜¯ ä¸‹è½½çš„postgresçš„jdbcé©±åŠ¨ç¨‹åº
		- $CLASSPATHæ˜¯åŸæ¥çš„CLASSPATH
- ç°åœ¨çš„é—®é¢˜æ˜¯password authentication
- å¯†ç éªŒè¯å¤±è´¥
- å…ˆå»æºç¨‹åºçœ‹çœ‹

### æºç¨‹åº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444184189)

- ç”¨æˆ·åæ˜¯postgresåº”è¯¥æ²¡æœ‰é—®é¢˜
- ä½†æ˜¯å¯†ç åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444338028)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444427459)

- æ³¨æ„æœ‰ä¸¤ä¸ªå¯†ç 
	- ä¸€ä¸ªæ˜¯æ•°æ®åº“çš„postgresçš„å¯†ç 
	- ä¸€ä¸ªæ˜¯ç³»ç»Ÿçš„postgresçš„å¯†ç 
	- æˆ‘ä»¬ç”¨çš„æ˜¯æ•°æ®åº“çš„
- é‚£ç³»ç»Ÿçš„æœ‰ä»€ä¹ˆç”¨å‘¢
- å°±æ˜¯ä¸€èˆ¬ç”¨æˆ·æƒ³ç”¨ç”¨postgresç³»ç»Ÿç”¨æˆ·èº«ä»½åšäº‹æƒ…çš„æ—¶å€™å°±ä¼šç”¨åˆ°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444544416)

- æˆ‘ä»¬æŒ‰ç…§ç¬¬ä¸€ä¸ªæ–¹æ³•æ¥

### ä¿®æ”¹å¯†ç 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444680891)

- æˆ‘ä»¬æŠŠå¯†ç è®¾ç½®ä¸ºoeasy@linux
- ç„¶åå»ä¿®æ”¹jdbc.java

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444735840)

### å†æ¬¡ç¼–è¯‘è¿è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444790174)

- è¿™æ¬¡å¯†ç è®¤è¯è¿‡å»äº†
- ä½†æ˜¯å¡åœ¨äº†æ•°æ®åº“çš„åç§°
- ç°åœ¨è¿™ä¸ªæ˜¯testdb
- æˆ‘ä»¬çš„databaseæ˜¯oeasy
- ä¿®æ”¹æºç 

### ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444904299)

- ç¼–è¯‘è¿è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631444949867)

- ç»ˆäºæˆåŠŸå•¦ï¼
- æˆ‘æƒ³ç”¨ä¸€äº›å¿«ä¹çš„è¯æ±‡
- ä½†æ˜¯æˆ‘å¿ä½äº†
- æˆ‘å“­äº†
- ç°åœ¨è¿˜ä¸æ˜¯åº†ç¥çš„æ—¶å€™
- æˆ‘æƒ³æŠŠurlsè¡¨é‡Œé¢çš„æ•°æ®æŸ¥è¯¢å‡ºæ¥

### æœç´¢

- æœç´¢èƒ½åŠ›æ˜¯å¾ˆé‡è¦
- çœŸæ­£æœ‰ä¸»è§çš„äºº
- éƒ½æ˜¯ä¼šæœç´¢çš„
- ç›¸ä¿¡ä¸–ç•Œä¹Ÿç›¸ä¿¡è‡ªå·±

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631445170233)

- æ„Ÿè§‰è‡ªå·±å……æ»¡äº†èƒ½é‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631445186971)

- åº”è¯¥å°±æ˜¯è¿™æ ·å­å¯ä»¥æŸ¥è¯¢æ•°æ®åº“ 
- æŠŠ19è¡Œåˆ°37è¡Œæ‹¿åˆ°æˆ‘ä»¬çš„jdbc.javaä¸­

### èåˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631445442190)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631445450099)

- ç¼–è¯‘å¤±è´¥
- ä¸å…‰è¦èåˆä»£ç 
- å¼•å…¥çš„åŒ…ä¹Ÿè¦èåˆ
- éœ€è¦Statementå’ŒResultSet

### åå¤å…¶é“

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631445681696)

- æ³¨æ„æ•°æ®åº“å
- è¡¨å
- å­—æ®µå
- æ•°æ®ç±»å‹
- æˆ‘æ˜¯åå¤äº†å¥½å‡ æ¬¡æ‰æˆåŠŸ
- åˆ«ç€æ€¥

### æœ€ç»ˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631445716581)

- æœ€ç»ˆæ€»ä¼šæˆåŠŸ
- ç°åœ¨éœ€è¦æˆ‘ä»¬æŠŠè¿™ä¸ªjdbc.javaå’ŒOeasyServlet.javaèåˆåˆ°ä¸€èµ·
- ä¹Ÿå°±æ˜¯åœ¨æµè§ˆå™¨é‡Œé¢æŠŠpostgresé‡Œçš„æ•°æ®è¡¨å±•ç¤ºå‡ºæ¥

### æ•´åˆ

- ä¸ä½†æ•´åˆä»£ç 
- ä¹Ÿè¦æ•´åˆéœ€è¦ç”¨åˆ°çš„åŒ…

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631454705074)

### ç¼–è¯‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631455024234)

- ç¼–è¯‘æ²¡æœ‰é—®é¢˜
- é‡å¯æœåŠ¡å™¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631455044287)

- åœ¨æµè§ˆå™¨ä¸­è®¿é—®èµ„æº

### è®¿é—®

- å½“æˆ‘è®¿é—® http://localhost:8080 çš„æ—¶å€™
- tomcatå¯åŠ¨ç€
- åæ¥æˆ‘è®¿é—® http://localhost:8080/oeasy/oeasy
- æœåŠ¡å™¨ç›´æ¥å´©æºƒäº†
- http://localhost:8080 éƒ½æ— æ³•è®¿é—®äº†
- æˆ‘å»çœ‹ä¸€ä¸‹æ—¥å¿—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631455374177)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631455551365)

- å¥½åƒæ˜¯postgresql æ²¡æœ‰å¯åŠ¨æœåŠ¡

### é‡æ¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631455630518)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631455666617)

- é¡ºåˆ©åœ°è¯»å‡ºäº†postgresé‡Œé¢çš„oeasyåº“ä¸­çš„urlsè¡¨ä¸­çš„ä¿¡æ¯ï¼ï¼ï¼
- å¾ˆå¼€å¿ƒï¼
- å¯ä»¥å¾€æ•°æ®åº“é‡Œé¢æ’å…¥æ•°æ®ä¹ˆï¼Ÿ

### è¡¨å•

- ä¿®æ”¹oeasy.htmlæ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210913-1631496752304)

- å¯ä»¥çœ‹åˆ°è¿™ä¸ªè¡¨å•æ˜ å°„åˆ°./insert
- æäº¤ä¸€ä¸‹è¯•è¯•


### æ˜ å°„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210913-1631496871039)

- ç°åœ¨éœ€è¦ä¸€ä¸ªInsertServlet.classæ–‡ä»¶
- å…ˆå¤åˆ¶å‡ºä¸€ä¸ªjavaæ–‡ä»¶
- ç„¶åå¯¹äºæ–‡ä»¶è¿›è¡Œä¿®æ”¹

### ç¨‹åº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210913-1631509979299)

- ç±»åéœ€è¦ä¿®æ”¹
- ç„¶åæ‰§è¡Œä¸€ä¸ªsql
- æŠŠè¿™ä¸ªsqlè¯­å¥è¾“å‡ºå‡ºæ¥
- å¯ä»¥åœ¨logé‡Œé¢æ‰¾åˆ°

### å®é™…è¿è¡Œ

- å¯ä»¥çœ‹åˆ°æ’å…¥çš„å†…å®¹å¯ä»¥ç”¨/oeasyæŸ¥è¯¢åˆ°
- è¯´æ˜å·²ç»æ’å…¥æ•°æ®åº“

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210913-1631510253960)

- å¯ä»¥åšinsert
- å…¶å®ä¹Ÿå°±å¯ä»¥æ‰§è¡Œå…¶ä»–çš„sqlè¯­å¥
	- delete
	- update
	- create table
	- ç­‰ç­‰

### æ€»ç»“ ğŸ¤¨
- æˆ‘ä»¬è¿™æ¬¡æ­å»ºäº†tomcaté€šè¿‡servletè®¿é—®postgresæ•°æ®åº“
- æ–°å»ºäº†ä¸€ä¸ªwebapp
- åœ¨webappä¸‹é¢çš„WEB-INF/web.xmlä¸­
	- å»ºç«‹äº† url-pattern å’Œ servlet-name ä¹‹é—´çš„å…³ç³»
	- å»ºç«‹äº† servlet-name å’Œ servlet-classä¹‹é—´çš„å…³ç³»
- åˆ¶ä½œäº†servletçš„classå¹¶ä¸”åœ¨urlä¸ŠéªŒè¯
- ç¼–è¾‘ jdbc.java æˆåŠŸè®¿é—®äº† pqæ•°æ®åº“
- æŠŠjdbc.javaæ•´åˆæˆä¸€ä¸ªserlvetçš„å½¢å¼
- ä¸ä½†è¿›è¡Œselectæ“ä½œè€Œä¸”è¿›è¡Œinsertæ“ä½œ
- ä¸è¿‡å¤šä¸ªæ–‡ä»¶è®¿é—®æœ‰ç‚¹éº»çƒ¦
- å¯ä»¥åˆ†å±ä¹ˆï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹


