---
show: step
version: 1.0
enable_checker: true
---

# é…ç½®servlet

## å›é¡¾
- ä¸Šæ¬¡äº†è§£äº†åº”ç”¨æœåŠ¡å™¨
	- application server
	- ä»–å¯ä»¥åŠ¨æ€å¤„ç†å„ç§è¯·æ±‚
- æˆ‘ä»¬åœ¨ä¼—å¤šjavaåº”ç”¨æœåŠ¡å™¨ä¸­é€‰æ‹©äº†tomcat
- äº†è§£äº†tomcatçš„å†å²
- å¹¶ä¸”å­¦ä¹ äº†ä¸‹è½½tomcatçš„æ–¹æ³•
- è¿˜æœ‰æ‰¾åˆ°æœ¬åœ°tomcatçš„æ–¹æ³•
- è¿™ä¸ªä¸œè¥¿èƒ½ä¸èƒ½è·‘èµ·æ¥å‘¢ï¼ŸğŸ¤”

### å¯åŠ¨ tomcat

- é¦–å…ˆè¦å…ˆä¸‹è½½å¹¶è§£å‹

```bash
git clone https://github.com/overmind1980/tomcat10.git
cd tomcat10
tar -zxf apache-tomcat-10.0.12.tar.gz
```

- ç„¶åæŠŠä»–æ‹·è´åˆ°opté‡Œé¢
- optçš„æ„æ€æ˜¯
	- Optional application software packages
	- å¯é€‰åº”ç”¨è½¯ä»¶åŒ…

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650876863529)

- è¿›å…¥tomcatä¸»ç›®å½•

### è®¿é—®

- ç«ç‹æ‰“å¼€http://localhost:8080/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220426-1650949102717)

- åœ¨æµè§ˆå™¨ä¸­è®¿é—®tomcatä¼šå¦‚ä½•å‘¢ï¼Ÿ
	- è²Œä¼¼åªæ˜¯æŠŠç¨‹åºæ‹·è´è¿‡æ¥äº†
	- è¿˜æ²¡æœ‰è¿›è¡Œå¯åŠ¨
		- å¦‚ä½•å¯åŠ¨ tomcatæœåŠ¡å™¨å‘¢ï¼Ÿ


### å¯åŠ¨tomcatæœåŠ¡å™¨
- è¿›å…¥tomcatä¸»ç›®å½•
- æ‰¾åˆ°å¹¶è¿›å…¥bin
- æ‰€æœ‰çš„å¯æ‰§è¡Œè„šæœ¬éƒ½åœ¨é‡Œé¢
- æ‰¾åˆ°startup.sh
- ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650877067350)

### æµè§ˆå™¨éªŒè¯
- ç«ç‹æ‰“å¼€http://localhost:8080/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650877123798)

- è¿™ä¸ªé¦–é¡µæ–‡ä»¶å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿ

### æ–°å»º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650877212126)

- webappsé‡Œé¢éƒ½æ˜¯app
	- web ç½‘ç«™
	- app åº”ç”¨ç¨‹åº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650877250116)

- éƒ½æœ‰ä»€ä¹ˆappå‘¢ï¼Ÿ
	- examples
		- ä¾‹å­
	- docs
		- æ–‡æ¡£
	- host-manager
		- ä¸»æœºç®¡ç†
	- manager
		- ç®¡ç†
	- ROOT
		- è¿™ä¸ªåº”è¯¥æ˜¯æ ¹ç›®å½•
		- ä¹Ÿå°±æ˜¯http://localhost:8080/å¯¹åº”çš„ç›®å½•
- åœ¨webappsä¸‹æ–°å»ºä¸€ä¸ªoeasyæ–‡ä»¶å¤¹
	- ä¹Ÿå°±æ˜¯åœ¨webapps(ç½‘é¡µåº”ç”¨ç¨‹åº)ä¸­
	- å»ºäº†ä¸€ä¸ªæ–°åº”ç”¨
	- å«åšoeasy

### ç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210911-1631367201797)

- è¿›å…¥è¿™ä¸ªoeasyæ–‡ä»¶å¤¹
- å°è¯•åœ¨è¿™é‡Œæ–°å»ºä¸€ä¸ªé™æ€ç½‘é¡µ
- å¹¶åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210911-1631367236934)

- è¿™ä¸ªé™æ€ç½‘é¡µæ˜¯å¯ä»¥çœ‹çš„
- ä½†æ˜¯å¦‚ä½•å»ºç«‹åŠ¨æ€é¡µé¢å‘¢ï¼Ÿ
- æŸ¥çœ‹å¸®åŠ©

### å¸®åŠ©

- ç¬¬ä¸€ä¸ªwebApplication

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210911-1631367640234)

### ç»“æ„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210911-1631367850913)

- è¿™ä¸ªéœ€è¦ä¸€äº›åŸºæœ¬çš„ç»“æ„
- é¦–å…ˆæ˜¯æœ‰ä¸ªWEB-INFæ–‡ä»¶å¤¹
- WEB-INFé‡Œé¢æœ‰
	- web.xml
	- classesæ–‡ä»¶å¤¹
	- libæ–‡ä»¶å¤¹
- æˆ‘ä»¬å…ˆå»ºç«‹è¿™ä¸ªç»“æ„

### å»ºç«‹ç»“æ„

- å»ºç«‹ç›¸åº”çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210911-1631368309506)

- ä½†æ˜¯web.xmlåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220426-1650949618805)

- åœ¨tomcatä¸­æŸ¥æ‰¾å·²ç»å­˜åœ¨çš„web.xml
- æ¯ä¸ªwebappsçš„ç›®å½•çš„WEB-INFä¸‹é¢éƒ½æœ‰è¿™ä¸ªæ–‡ä»¶
- å»é‚£ä¸ªç›®å½•ç§ç§

### å¤åˆ¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220426-1650949762878)

- æŠŠæ‰¾åˆ°çš„web.xmlæ”¾åˆ°WEB-INFä¸‹é¢
- æ‰“å¼€web.xml

### é…ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210911-1631368695991)

- æŠŠæ³¨é‡Šå»æ‰
- æŠŠåŒç±»é¡¹åˆå¹¶

### ç®€åŒ–

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650878545894)

- å¥½åƒé…ç½®äº†ä¸€ä¸ªurl
- å«åš/hello
- åº”è¯¥æŒ‡çš„æ˜¯å½“å‰åº”ç”¨oeasyä¸‹çš„/hello
- é…ç½®å¥½äº†ä¿å­˜ä¸€ä¸‹
- å»æµè§ˆå™¨é‡Œçœ‹çœ‹

### æ‰¾ä¸åˆ°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650878371481)

- ä¿®æ”¹äº†æœåŠ¡å™¨é…ç½®
- è¿˜éœ€è¦é‡å¯ä¸€ä¸‹æœåŠ¡å™¨

### é‡å¯æœåŠ¡å™¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650879121968)

- å½“å‰çš„ä½ç½®æ˜¯/opt/apache-tomcat-10.0.12/webapps/oeasy/WEB-INF
- å…³é—­ã€å¯åŠ¨æœåŠ¡å™¨çš„å‘½ä»¤åœ¨/opt/apache-tomcat-10.0.12/bin
- æ‰€ä»¥å‘ä¸Šä¸‰å±‚æ‰èƒ½æ‰¾åˆ°bin

### æµè§ˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210911-1631368828011)

- è®¿é—®å¤±è´¥äº†
- ä½†æ˜¯é”™è¯¯ä¿¡æ¯é‡Œé¢æç¤º
- è¦æ‰¾mypackage.Hello
- è¿™å¥½åƒæ˜¯æˆ‘ä»¬é…ç½®åœ¨web.xmlä¸­çš„ä¸œè¥¿

### å¯¹åº”å…³ç³»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631406260957)

- å¯¹åº”å…³ç³»æ‰¾åˆ°äº†
	- å¯¹åº”å…³ç³»å°±æ˜¯mappingæ˜ å°„å…³ç³»
	- çº¢è‰²çš„æ˜¯ç½‘é¡µå¯¹åº”çš„åœ°å€urlè·¯å¾„å
	- ç»¿è‰²çš„æ˜¯å…·ä½“çš„ç±»å
	- ç´«è‰²çš„æ˜¯urlå’Œç±»åä¹‹é—´çš„å¯¹åº”å…³ç³»
		- è·¯å¾„å’Œç±»å¯¹åº”ç€åŒä¸€ä¸ªservlet-class
	- è¿™ç§æ˜ å°„å…³ç³»å…¶å®æ˜¯ä¸€ç§è·¯ç”±(routing)
- ç°åœ¨åªè¦æˆ‘ä»¬æœ‰mypackage.Helloå°±å¥½äº†
- æ€ä¹ˆåšå‘¢ï¼Ÿ
	- æˆ‘éœ€è¦æ‰¾åˆ°javaæºæ–‡ä»¶

### å¯»æ‰¾javaæºæ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631426053724)

- è¿™äº›ä¸œè¥¿å¤§å¤šåœ¨webapps/examplesçš„æ–‡ä»¶å¤¹ä¸‹
- è¿™äº›å¯ä»¥é€šè¿‡é¡µé¢è®¿é—®ä¹ˆï¼Ÿ

### é¡µé¢è®¿é—®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631426362330)

- è¿™äº›ä¾‹å­å±äºexamples
- è¿™ä¸ªä¾‹å­HelloWorldExample
- å¯ä»¥åœ¨web.xmlé‡Œé¢æ‰¾åˆ°å®ƒå¯¹åº”çš„classæ–‡ä»¶ä¹ˆï¼Ÿ

### æ˜ å°„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631426785530)


- è¿›å…¥/webapps/examples
- è¿›å…¥WEB-INF
- åœ¨web.xmlä¸­æŸ¥æ‰¾Hello
	- çº¢è‰²çš„æ˜¯å¯ä»¥çœ‹åˆ°çš„url
	- ç»¿è‰²çš„æ˜¯å¯¹åº”çš„servletçš„åå­—
	- ç´«è‰²çš„æ˜¯classçš„åå­—
- æˆ‘ä»¬åªè¦æ‰¾åˆ°HelloWorldExample.javaå°±å¯ä»¥äº†

### æŸ¥æ‰¾

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631427010614)

- ä½ç½®å°±åœ¨WEB-INFä¸‹é¢çš„classesä¸‹
- æˆ‘ä»¬å»æ‰“å¼€è¿™ä¸ªæ–‡ä»¶

### java

- å…ˆè§‚å¯Ÿä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶
- view ../../webapps/examples/WEB-INF/classes/HelloWorldExample.java


![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650879535890)

- æŠŠè¿™ä¸ªä¸œè¥¿æ‰“å¼€
- ä¸æ˜¯åœ¨webappsä¸‹é¢å»ºç«‹äº†è‡ªå·±çš„æ–‡ä»¶å¤¹oeasyä¹ˆ
- æŠŠä»–æ‹·è´åˆ°oeasyä¸‹é¢
- å¯ä»¥ä¹ˆï¼Ÿ

### æ”¾ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650879674064)

- ç„¶åå»ºç«‹æ˜ å°„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650879756720)

- åœ¨oeasyè¿™ä¸ªwebappä¸­
	- urlæ˜¯oeasy/hello
	- servletçš„åå­—æ˜¯HelloWorldExample
	- classæ˜¯HelloWorldExample.class

### åˆ·æ–°ç½‘å€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631427851509)

- é”™è¯¯å‡ºç°åœ¨ç¬¬41è¡Œ
- å»æ–‡ä»¶å¯»æ‰¾ä¸€ä¸‹

### æºæ–‡ä»¶
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631427890796)

- ä»–å¼•ç”¨äº†ä¸€ä¸ªResourceBundleçš„ç±»
- è¿™ä¸ªç±»è¯»å–äº†ä¸€ä¸ªæœ¬åœ°çš„å­—ç¬¦ä¸²èµ„æº
- ç½‘é¡µçš„titleæ˜¯é€šè¿‡è¿™ä¸ªä¸œè¥¿æ¥è®¾ç½®çš„
- å…·ä½“è¿™ä¸ªæœ¬åœ°èµ„æºå­—ç¬¦ä¸²åœ¨å“ªå‘¢ï¼Ÿ

### æŸ¥æ‰¾
- examplesä¸‹é¢åˆ°åº•æœ‰äº›ä»€ä¹ˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650879978080)

- ä»–è¦æ‰¾çš„åº”è¯¥æ˜¯çº¢æ¡†çš„æ–‡ä»¶
- æ ¹æ®æœ¬åœ°çš„Localeä¸åŒ
- å¯ä»¥å¾—åˆ°ä¸åŒè¯­è¨€çš„HelloWorld
	- ä¸­æ–‡
	- æ³•æ–‡
	- ä¿„æ–‡
- é‚£æˆ‘ç›´æ¥å†™ä¸€ä¸ª `hello world` è¡Œä¹ˆï¼Ÿ
- æŠŠè¿™ä¸ªè¾“å‡ºç®€åŒ–åˆ°ä¸èƒ½å†ç®€åŒ–

### helloworld

- å›åˆ°oeasyæ–‡ä»¶å¤¹
- æ‰¾åˆ°javaæºæ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650880163222)

- æŠŠè¿™ä¸ªæºç¨‹åºç®€åŒ–åˆ°ä¸èƒ½å†ç®€åŒ–

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650880245217)

- æ³¨æ„å¦‚æœæ˜¯tomcat8æˆ–è€…9
	- ç”¨çš„æ˜¯javaxè€Œä¸æ˜¯jakarta
- ä¿å­˜å¹¶é€€å‡º
- å°è¯•ç¼–è¯‘

### ç¼–è¯‘

- javac HelloWorldExample.java
	- javac æ˜¯javaçš„Compileç¨‹åº
	- æŠŠjavaæ–‡ä»¶ç¼–è¯‘ä¸ºclassæ–‡ä»¶
- ç¼–è¯‘çš„å¯¹è±¡æ˜¯
	- HelloWorldExample.java

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650880306797)

- ç¼–è¯‘å¤±è´¥æ‰¾ä¸åˆ°javax.servlet

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631428588423)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631428652519)

### é‡æ–°ç¼–è¯‘

- è®¾ç½®æœ¬æ¬¡çš„classpath
	- javac -cp /XX/Xxx/lib/servlet-api.jar HelloWorldExample.java
		- javac 
			- java Compile
		- -cp /XX/Xxx/lib/servlet-api.jar
			- è®¾ç½®classpath
			- åŒ…å«/XX/Xxx/lib/servlet-api.jar ä¸­çš„classes
		- ç¼–è¯‘å¯¹è±¡è¿˜æ˜¯HelloWorldExample.java

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650880396748)

- åªè¦å¸¦ç€cp(classpath)è¿›è¡Œç¼–è¯‘
- å°±å¯ä»¥æˆåŠŸäº†

### æµè§ˆå™¨ä¸­è§‚å¯Ÿ

- é‡å¯æœåŠ¡å™¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650880502954)

- åœ¨æµè§ˆå™¨ä¸­è®¿é—®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631429077495)

- å¯ä»¥è¾“å‡ºä¸­æ–‡ä¹ˆï¼Ÿ

### å°è¯•

- ä¿®æ”¹æ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631429175976)

- ä¿å­˜å¹¶é€€å‡º

### é‡æ–°ç¼–è¯‘é‡å¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220425-1650880653114)

- é‡æ–°ç¼–è¯‘
- é‡å¯tomcat
- æµè§ˆå™¨ä¸­æ˜¾ç¤º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631429232764)

- é¡ºåˆ©æˆåŠŸ
- æŠŠè¿™ä¸ªæˆåŠŸçš„ç»“æ„è®°ä½
- è¿™ä¸ªå°±æ˜¯ä¸€ä¸ª
	- javawebå®¹å™¨ä¸­åº”ç”¨çš„æœ€å°ç»“æ„

### å¤ä¹ ç»“æ„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210912-1631438901840)

### æ€»ç»“ ğŸ¤¨
- æˆ‘ä»¬è¿™æ¬¡æ­å»ºäº†tomcat
- è¿è¡Œäº†èµ·æ¥
- åœ¨é‡Œé¢å»ºç«‹äº†è‡ªå·±çš„web application
	- oeasy
- è®¾ç½®å¥½äº†WEB-INF
	- web.xml
	- classes
- ç„¶åå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­åŠ¨æ€çš„æ˜¾ç¤ºä¿¡æ¯äº†
- å…¶å®æˆ‘æƒ³è®¿é—®æ•°æ®åº“é‡Œé¢çš„ä¿¡æ¯
- å¯èƒ½ä¹ˆï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹


