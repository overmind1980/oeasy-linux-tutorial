---
show: step
version: 1.0
enable_checker: true
---

# ç”¨ç½‘é¡µæ’å…¥æ•°æ® - æ–‡æœ¬æ¡†

### å›å¿†

- æˆ‘ä»¬ä¸Šæ¬¡ç ”ç©¶äº†å“åº”é‡å®šå‘
	- ä»ç½‘é¡µçš„ä½ç½®æ’å…¥æ•°æ®å
	- è¿›è¡Œé¡µé¢çš„è·³è½¬
- ä¸è¿‡å¦‚æœæˆ‘æƒ³è¦çš„æ˜¯ä»ç½‘é¡µé‡Œé¢æ–‡æœ¬æ¡†æäº¤æ•°æ®
	- poståˆ°æŒ‡å®šçš„å¤„ç†InsertServlet.class
	- ç„¶åæŠŠæ•°æ®æ’å…¥æ•°æ®åº“
	- è¿™åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658130065504)


### ç½‘é¡µè§„åˆ™

- ç½‘é¡µçš„è§„åˆ™æ¥è‡ªäºw3c.org
- ç›®å‰æ¥è‡ªäºwhatwg.org

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638146370982)

- æˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾åˆ°è¿™ä¸ªæ–‡æœ¬æ¡†çš„æ ‡å‡†å†™æ³•

### ç½‘é¡µä»£ç 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658149072846)

- åœ¨oeasyçš„æ ¹ä¸‹å»ºç«‹prepareInsert.html

```
<!doctype html>
<html lang="zh-CN">
	<head>
		<meta http-equiv="content-Type" content="text/html;charset=utf-8"/>
		<title>prepareInsert</title>
	</head>
	<body>
		<form action="./test" method="post">
			ç”¨æˆ·å:<input name="username" type="text" />
			<br/>
			å¯†ç :<input name="password" type="text" />
			<br/>
			<input type="submit" value="æäº¤" >
			<input type="reset" value="é‡ç½®" >
		</form>
	</body>
</html>
```

### æµè§ˆç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658149217612)

- æŠŠè¡¨å•formç”¨postçš„æ–¹å¼æäº¤åˆ°äº†./testè¿™ä¸ªurl
- é‚£ä¹ˆæˆ‘éœ€è¦ä¸ºè¿™ä¸ªurlæ˜ å°„ä¸€ä¸ªè·¯ç”±

### å‡†å¤‡ç¯å¢ƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638147861575)

- æŠŠè·¯ç”±é…ç½®å¥½
- ç„¶åå¤åˆ¶å‡ºç›¸åº”çš„javaæ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638147869716)

### æƒ³è±¡ä¸­çš„è·¯ç”±è¿‡ç¨‹

- é€šè¿‡/testè·¯ç”±åˆ°TestServlet.class
- å¹¶ä¸”æŠŠæ¥æ”¶åˆ°çš„æ•°æ®è¾“å‡ºåˆ°ç½‘é¡µçš„å“åº”(response)ä¸­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638152161511)

- ä½†æ˜¯servletå¦‚ä½•æ¥æ”¶åˆ°è¡¨å•æäº¤è¿‡æ¥çš„æ•°æ®å‘¢?
- å»æœç´¢ä¸€ä¸‹

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638149681243)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638149731685)

### TestServlet.java
```java
import java.io.IOException;
import java.io.PrintWriter;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
public class TestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    public void doGet(HttpServletRequest request,
                      HttpServletResponse response)
        throws IOException, ServletException
    {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<!DOCTYPE html><html><body>");
		String Username = request.getParameter("username");
		String Password = request.getParameter("password");
		out.print("ç”¨æˆ·å:"+Username);
		System.out.print("ç”¨æˆ·å:"+Username);
		out.print("å¯†ç "+Password);
        out.println("</body></html>");
    }
}
```

- æˆ‘ä»¬å»æµè§ˆå™¨
- å°è¯•æäº¤è¡¨å•

### å°è¯•æäº¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638156613279)

- 405 æ–¹æ³•ä¸å…è®¸
- é—®é¢˜æœ¬èº«å°±æ˜¯ç­”æ¡ˆ

### æœç´¢ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638156883281)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638156891996)

### ä¿®æ”¹

- æ³¨æ„æˆ‘ä»¬æŠŠdoGetå‡½æ•°åä¿®æ”¹ä¸ºäº†doPost
- ä½¿ç”¨request.getParameterå‡½æ•°æ¥æ¥æ”¶postè¿‡æ¥çš„æ•°æ®

```java
import java.io.IOException;
import java.io.PrintWriter;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
public class TestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    public void doPost(HttpServletRequest request,
                      HttpServletResponse response)
        throws IOException, ServletException
    {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<!DOCTYPE html><html><body>");
		String Username = request.getParameter("username");
		String Password = request.getParameter("password");
		out.print("ç”¨æˆ·å:"+Username);
		System.out.print("ç”¨æˆ·å:"+Username);
		out.print("å¯†ç "+Password);
        out.println("</body></html>");
    }
}
```

- çœŸçš„èƒ½æŠŠè¡¨å•æ•°æ®æäº¤ç»™servlet
- å¹¶è¾“å‡ºè¿™äº›è¡¨å•æ•°æ®ä¹ˆ?
- è¯•è¯•ï¼

### æäº¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638150284525)

- çœŸçš„å¯ä»¥æ¥å—åˆ°æµè§ˆå™¨æäº¤ä¸Šæ¥çš„æ•°æ®
- å¯æ˜¯ä»€ä¹ˆæ˜¯Get
- ä»€ä¹ˆåˆæ˜¯Postå‘¢ï¼Ÿ

### Postæ•°æ®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220427-1651023284737)

- é€‰ä¸­æµè§ˆå™¨æŒ‰ä¸‹<kbd>f12</kbd>æ£€æŸ¥å…ƒç´ 
- åœ¨æµè§ˆå™¨é‡Œé¢è§‚å¯Ÿåˆ°æäº¤æ–¹å¼çš„ä¸åŒ
- è¿™ä¸ªä¸åŒå…¶å®ä¸»è¦æŒ‡çš„æ˜¯prepareInsert.htmlä¸­
- formçš„methodçš„ä¸åŒ


### ä¿®æ”¹formçš„method

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638157790945)

- å¦‚æœæŠŠformçš„methodä¿®æ”¹ä¸ºget
- ä¼šæœ‰ä»€ä¹ˆä¸ä¸€æ ·å‘¢ï¼Ÿ

### æµè§ˆå™¨éªŒè¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220427-1651023454866)

- å…ˆå³é”®æŸ¥çœ‹æºæ–‡ä»¶ç¡®è®¤ä¸€æŠŠ
	- method="get"
	- å›¾ä¸­çº¢è‰²éƒ¨åˆ†
- ç„¶åç‚¹å‡»æäº¤

### æäº¤ä¹‹å

- æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æäº¤ä¹‹åçš„åœ°å€
- æäº¤çš„æ•°æ®éƒ½åœ¨åé¢æ˜ç€å†™äº†å‡ºæ¥
- è¿™å°±æ˜¯getçš„æäº¤æ–¹å¼
- ä¸€èˆ¬æ¥è¯´ä¸æ˜¯å¾ˆå®‰å…¨
- æ‰€ä»¥æˆ‘ä»¬æäº¤æ•°æ®è¿˜æ˜¯è¦ä½¿ç”¨postçš„æ–¹å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638163219238)

- æˆ‘ä»¬æŠŠmethodæ”¹å›åˆ°"post"
- ä½†æ˜¯ä¸­æ–‡å¯ä»¥æäº¤ä¹ˆï¼Ÿ

### ä¸­æ–‡é—®é¢˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638150397725)

- tomcat9å’Œä»¥å‰çš„ç‰ˆæœ¬å¯èƒ½ä¼šå‡ºç°äº†ä¹±ç é—®é¢˜
- ç”¨æˆ·åã€å¯†ç è¾“å‡ºä¸­æ–‡æ²¡æœ‰é—®é¢˜
- è¯´æ˜é—®é¢˜ä¸æ—¶å‡ºç°åœ¨responseçš„å±‚é¢
- é‚£å‡ºç°åœ¨ä»€ä¹ˆä½ç½®å‘¢ï¼Ÿ
- è¿™æ—¶è¦å»çœ‹çœ‹æ—¥å¿—é‡Œé¢å¦‚ä½•æŠ¥é”™

### è§‚å¯Ÿæ—¥å¿—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638152720162)

- å¯ä»¥çœ‹åˆ°åœ¨å¾—åˆ°Usernameçš„æ—¶å€™
- è¿™ä¸ªUsernameå°±æ˜¯ä¹±ç 
- ä¹±ç é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ
- æœç´¢ä¸€ä¸‹

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638152807803)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211129-1638152815227)

### ä¿®æ­£åçš„TestServlet.java

```java
import java.io.IOException;
import java.io.PrintWriter;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
public class TestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    public void doPost(HttpServletRequest request,
                      HttpServletResponse response)
        throws IOException, ServletException
    {
		request.setCharacterEncoding("utf-8");
        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");
        PrintWriter out = response.getWriter();
		String Username = request.getParameter("username");
		String Password = request.getParameter("password");
		out.print("ç”¨æˆ·å:"+Username);
		System.out.print("ç”¨æˆ·å:"+Username);
    }
}
```

- å…¶å®ä¸»è¦æ˜¯å‡½æ•°ä½“é‡Œé¢ç¬¬ä¸‰å¥
	- response.setCharacterEncoding("utf-8");
- ä¸­æ–‡é—®é¢˜è§£å†³äº†
- å¦‚æœæˆ‘æƒ³è¦postå’Œgetéƒ½èƒ½å¤„ç†åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

### å›å¿†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220509-1652109942673)

- ä¾‹ç¨‹é‡Œé¢æŠŠgetå’Œpostéƒ½å¤„ç†äº†
- doPostæ˜¯é€šè¿‡è°ƒç”¨doGetå®ç°çš„

### ç…§çŒ«ç”»è™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220521-1653138427168)

- è®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹

### æ€»ç»“
- æˆ‘ä»¬è¿™æ¬¡ç ”ç©¶äº†æ–‡æœ¬æ¡†æäº¤è¡¨å•
- æäº¤è¡¨å•æœ‰ä¸¤ç§æ–¹å¼
	- Get ç›´æ¥å†™åœ¨åœ°å€æ  ç®€å•æ˜äº†
	- Post éšè—èµ·æ¥ ä¿å¯†æ€§å¼º
- æäº¤çš„è¡¨å•è¦æœ‰ä¸€ä¸ªæ¥æ”¶çš„url
- è¿™ä¸ªurlå¯¹åº”çš„servletå¯ä»¥å¤„ç†ç›¸å…³æ•°æ®
	- å¯ä»¥æ’å…¥æ•°æ®åˆ°æ•°æ®åº“
	- æ’å…¥æ•°æ®åˆ°æ•°æ®åº“å‰é¢åšè¿‡
- ç°åœ¨å°±æ˜¯è¦æŠŠæ¥æ”¶è¡¨å•æ•°æ®å’Œæ’å…¥æ•°æ®åº“è®°å½•æ•´åˆèµ·æ¥
	- æŠŠè¡¨å•æ¥æ”¶åˆ°çš„æ•°æ®
	- æ’å…¥åˆ°æ•°æ®åº“çš„è¡¨ä¸­
	- æ·»åŠ ä¸€æ¡è®°å½•
- å¦‚ä½•æ•´åˆå‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹