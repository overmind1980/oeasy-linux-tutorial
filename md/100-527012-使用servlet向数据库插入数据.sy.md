---
show: step
version: 1.0
enable_checker: true
---

# ä½¿ç”¨servletå‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬å®Œæˆäº†
	- é€šè¿‡jdbcè¿æ¥postgres
	- å¹¶ä¸”æ’å…¥æ•°æ®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658116165544/wm)

- ç”¨javaç¨‹åºæ’æ•°æ®è¿™ä¸ªä»»åŠ¡åå¨èƒ½å®Œæˆ
- ä½†æ˜¯æ€ä¹ˆå’Œå‰å°é…åˆè”åŠ¨å‘¢ï¼ŸğŸ¤”
- æˆ‘å¯ä»¥ç”¨servletæ’å…¥æ•°æ®ä¹ˆï¼Ÿ
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹ğŸ»


### ä½¿ç”¨servlet

- é…ç½®urlçš„è·¯ç”±

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658124052795/wm)

### è·¯ç”±åˆ†æ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210913-1631496871039)

- ç°åœ¨å¯¹äº/insertè¿™ä¸ªurlä¸æ˜¯æ‰¾ä¸åˆ°èµ„æº
	- å¦‚æœæ²¡æœ‰å®šä¹‰è·¯ç”±çš„è¯
	- æ˜¯æ‰¾ä¸åˆ°èµ„æº
	- å› ä¸ºå·²ç»åœ¨web.xmlä¸­å®šä¹‰äº†è·¯ç”±
- ç°åœ¨æ˜¯æ‰¾ä¸åˆ°classæ–‡ä»¶
	- æ‰¾ä¸åˆ°å“ªä¸ªclassæ–‡ä»¶ï¼Ÿ
	- æ‰¾ä¸åˆ°web.xmlè·¯ç”±ä¸­å®šä¹‰å¥½çš„
	- /insertå¯¹åº”çš„InsertServlet.class

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658124237750/wm)

### InsertServlet.java

- å…ˆå¤åˆ¶SelectServlet.javaæ–‡ä»¶
- æˆä¸ºInsertServlet.java
- ç„¶åå¯¹äºæ–‡ä»¶è¿›è¡Œä¿®æ”¹

```java
import java.sql.*;
import java.io.IOException;
import java.io.PrintWriter;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
public final class InsertServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    @Override
    public void doGet(HttpServletRequest request,
                      HttpServletResponse response)
      throws IOException, ServletException {
        response.setContentType("text/html");
        response.setCharacterEncoding("UTF-8");
        PrintWriter out = response.getWriter();
        Connection c = null;
        Statement stmt = null;
        try {
            Class.forName("org.postgresql.Driver");
            c = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/oeasy", "postgres",
                    "oeasy@pg");
            out.println("Pq Connection success!<br/>");
            stmt = c.createStatement();
            String sql = "insert into urls(name,url) values('baidu','http://baidu.com')";
            stmt.executeUpdate(sql);
            stmt.close();
            c.close();

        } catch (Exception e) {
            e.printStackTrace();
            System.err.println(e.getClass().getName() + ": " + e.getMessage());
        }
    }
}

```

- å¯ä»¥è¿è¡Œä¹ˆï¼Ÿ
- ç¼–è¯‘ä»–ç„¶å
- é‡å¯tomcatæ¥çœ‹çœ‹

### é‡å¯tomcat

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658124857616/wm)

- é‡å¯åè¿è¡Œæ¯”è¾ƒé¡ºåˆ©
- é‚£è¿™ä¸ªæ•°æ®ä»–æ’è¿›å»äº†ä¹ˆï¼Ÿ

### pg

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658124981507/wm)

- è¿™ä¸ªæ•°æ®ç¡®å®æ’è¿›å»äº†
- ä½†å¦‚æœæˆ‘æƒ³å†æ’åŒæ ·çš„æ•°æ®ä¼šå¦‚ä½•å‘¢ï¼Ÿ

### æŠ¥é”™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211128-1638108660483)

- å¦‚æœæ˜¯åœ¨é¡µé¢ä¸Šæ’å…¥ä¼šå¦‚ä½•å‘¢ï¼Ÿ
- å»æ—¥å¿—çœ‹çœ‹æŠ¥é”™

### é¡µé¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125049964/wm)
- é¡µé¢æ²¡æœ‰æŠ¥é”™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125075947/wm)

- ä¹Ÿæ²¡æœ‰æ–°æ•°æ®æ’å…¥
- åˆ°æ—¥å¿—é‡Œé¢å»è§‚å¯Ÿä¸€ä¸‹

### æƒé™ä¸è¶³

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125154343/wm)

- ç»™ä»»ä½•ç”¨æˆ·éƒ½æœ‰è¯»å–æƒé™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125313125/wm)

### æŠ¥é”™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125416989/wm)

- åŸå› æ˜¯urlå­—æ®µæœ‰ä¸€ä¸ªuniqueçº¦æŸ
- ä½†æ˜¯ä¸ºä»€ä¹ˆé¡µé¢æ²¡æœ‰å´©æºƒå‘¢ï¼Ÿ

### åˆ†æ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125527249/wm)

- çº¢æ¡†ä¸­çš„è¯­å¥æ‰§è¡Œå‡ºé”™å
- ç›´æ¥è·³è½¬åˆ°äº†catchçš„è¯­å¥å—
- åœ¨åå°æ—¥å¿—è¾“å‡ºé”™è¯¯ä¿¡æ¯äº†
- æˆ‘å¦‚æœæƒ³è¦åœ¨å‰å°ç½‘é¡µè¾“å‡ºé”™è¯¯ä¿¡æ¯å‘¢ï¼Ÿ

### è¾“å‡ºåˆ°ç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125744801/wm)

- System.outæ˜¯è¾“å‡ºåˆ°æ—¥å¿—
- outæ˜¯è¾“å‡ºåˆ°response

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125751771/wm)

- å¦‚æœæˆ‘æƒ³æŠŠsqlè¯­å¥è¾“å‡ºåˆ°æ—¥å¿—åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

### è¾“å‡ºdebugä¿¡æ¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658125948831/wm)

- æ‰§è¡Œéœ€è¦åˆ°æµè§ˆå™¨é‡æ–°åˆ·æ–°ä¸€ä¸‹url
- tomcatå°±ä¼šå»æ‰§è¡Œ/insertå¯¹åº”çš„InsertServlet.class

### æ—¥å¿—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658126127700/wm)

- è¿™å¥è¯å¯ä»¥æ‹¿åˆ°postgresé‡Œé¢å»è§‚å¯Ÿ

### è§‚å¯Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658126217594/wm)

- ç¡®å®æ˜¯å› ä¸ºuniqueçº¦æŸçš„é—®é¢˜å¯¼è‡´æ— æ³•æ’å…¥æ•°æ®
- æ’æ•°æ®æ˜¯okçš„
- åªè¦ä¸è¿åuniqueçº¦æŸ

### æ€»ç»“
- æˆ‘ä»¬è¿™æ¬¡ç ”ç©¶äº†æ’å…¥æ•°æ®
	- è€Œä¸”æ˜¯ä»ç½‘é¡µçš„ä½ç½®æ’å…¥æ•°æ®
	- è®©tomcatæ¥æ”¶åˆ°/insertè¯·æ±‚å
	- æ‰§è¡ŒInsertServlet.class
	- ä»è€Œæ’å…¥æ•°æ®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220717-1658065746418)

- åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­
	- outè¾“å‡ºåˆ°æµè§ˆå™¨å¾—åˆ°å“åº”response
	- System.outè¾“å‡ºåˆ°æœåŠ¡å™¨çš„æ—¥å¿—
- å¦‚æœæ’å…¥ä¹‹å
	- å…¶å®æœ€å¥½å±•ç¤ºçš„æ˜¯æ’å…¥ç»“æœ
	- å¦‚ä½•å±•ç¤ºæ’å…¥ç»“æœå‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹