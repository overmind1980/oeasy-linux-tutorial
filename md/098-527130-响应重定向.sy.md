---
show: step
version: 1.0
enable_checker: true
---

# ä½¿ç”¨servletå‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®

## å›å¿†
- ä¸Šæ¬¡ç ”ç©¶äº†æ’å…¥æ•°æ®
	- è€Œä¸”æ˜¯ä»ç½‘é¡µçš„ä½ç½®æ’å…¥æ•°æ®
	- è®©tomcatæ¥æ”¶åˆ°/insertè¯·æ±‚å
	- æ‰§è¡ŒInsertServlet.class
	- ä»è€Œæ’å…¥æ•°æ®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220717-1658065746418)

- åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­
	- outè¾“å‡ºåˆ°æµè§ˆå™¨å¾—åˆ°å“åº”response
	- System.outè¾“å‡ºåˆ°æœåŠ¡å™¨çš„æ—¥å¿—
- å¦‚æœæ’å…¥ä¹‹å
	- å…¶å®æœ€å¥½å±•ç¤ºçš„æ˜¯æ’å…¥ç»“æœ
	- å¦‚ä½•å±•ç¤ºæ’å…¥ç»“æœå‘¢ï¼ŸğŸ¤”

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211128-1638105328982)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211128-1638105340016)

- åœ¨æœåŠ¡å™¨ç«¯
- è®©responseé‡å®šå‘åˆ°/select ç„¶åç›´æ¥æŠŠç»“æœç»™è¿‡å»å¥½åƒå°±è¡Œäº†
- è¯•è¯•å»

### é‡å®šå‘

- æˆ‘ä»¬é¦–å…ˆç¡®è®¤ä¸€ä¸‹/selectèƒ½å¦å‡ºæ¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658127690540)

- åº“é‡Œé¢æœ‰ä¸œè¥¿
- ä½†æ˜¯æŸ¥ä¸å‡ºæ¥
- ä¸ºä»€ä¹ˆï¼Ÿ

### æŸ¥çœ‹æ—¥å¿—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658127719788)

- æˆ‘ä»¬æ”¹è¿‡åˆ—å
	- æŠŠtopicä¿®æ”¹æˆäº†name
	- ä½†æ˜¯ç¨‹åºè¿˜æ²¡æœ‰æ¥å¾—åŠä¿®æ”¹
- å¯è§æ•°æ®åº“ä¸€æ”¹
	- ç¨‹åºéƒ½å¾—è·Ÿç€ä¿®æ”¹

### ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658127948636)

- ä¿®æ”¹ä¹‹å
- ä¿å­˜å¹¶ç¼–è¯‘
- é€šè¿‡æµè§ˆå™¨è®¿é—®

### æµè§ˆå™¨è®¿é—®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658127986249)

- /selectè¿™ä¸ªurlä¿®å¤æˆåŠŸ
- å¦‚ä½•è·³è½¬é¡µé¢å‘¢ï¼Ÿ

### è·³è½¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658128693537)

- æ‰§è¡Œè·³è½¬çš„æ˜¯InsertServlet.class
- æ­£å¸¸ä»–åº”è¯¥è¿”å›/inserté¡µé¢å¯¹åº”çš„å“åº”response
- åœ¨æ‰§è¡Œå®Œæ’å…¥æ•°æ®çš„ä»»åŠ¡å
- åœ¨æœ€åä¸€åˆ»
- ä»–è·³è½¬äº†
- è·³è½¬åˆ°äº†http://localhost/oeasy/select
- ç„¶åæ‰§è¡ŒSelectServlet.classçš„ä»£ç 
- ç„¶åæŠŠè¿™ä¸ªä»£ç æ‰§è¡Œç»“æœçš„responseä½œä¸ºæœ€ç»ˆçš„response
- å‘é€ç»™æµè§ˆå™¨
- æµè§ˆå™¨ä»€ä¹ˆç»“æœå‘¢ï¼Ÿ

### æµè§ˆå™¨ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658128998401)

- æµè§ˆå™¨è·³è¿‡å»äº†
- è€Œä¸”urlä¹Ÿæ˜¾ç¤º/select
- å¦‚æœSelectServlet.classè‡ªå·±æœ€åè·³è½¬åˆ°è‡ªå·±ä¼šå¦‚ä½•å‘¢ï¼Ÿ

### è‡ªæˆ‘è·³è½¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129117113)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129232631)

- æœä¸å…¶ç„¶å‡ºé”™äº†
- è‡ªæˆ‘å¾ªç¯äº†ç­‰äºæ˜¯
- å…³äºè¿™ä¸ªå‡½æ•°çš„å®šä¹‰åœ¨å“ªå‘¢ï¼Ÿ


### æŸ¥æ‰¾api

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129284075)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129407311)

- å¯ä»¥æ¥å—ç›¸å¯¹è·¯å¾„
- ä½†æ˜¯ä¼šæŠŠç›¸å¯¹è·¯å¾„è½¬åŒ–ä¸ºç»å¯¹è·¯å¾„
- æŠŠæœ€ç»ˆå®Œæˆä»£ç å†™å‡ºæ¥

### æœ€ç»ˆä»£ç 

```
import java.sql.*;
import java.io.IOException;
import java.io.PrintWriter;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
public final class InsertServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    @Override
    public void doGet(HttpServletRequest request,
                      HttpServletResponse response)
      throws IOException, ServletException {
        response.setContentType("text/html");
        response.setCharacterEncoding("UTF-8");
        PrintWriter out = response.getWriter();
        Connection c = null;
        Statement stmt = null;
        try {
            Class.forName("org.postgresql.Driver");
            c = DriverManager.getConnection(
                    "jdbc:postgresql://localhost:5432/oeasy", "postgres",
                    "oeasy@pg");
            out.println("Pq Connection success!<br/>");
            stmt = c.createStatement();
            String sql = "insert into urls(name,url) values('baidu','http://baidu.com')";
            System.out.print("[oeasy]debug=InsertServlet.java===\n"+sql+"\n");
            stmt.executeUpdate(sql);
            stmt.close();
            c.close();

        } catch (Exception e) {
            e.printStackTrace();
            System.err.println(e.getClass().getName() + ": " + e.getMessage());
            out.print(e.getClass().getName() + ": " + e.getMessage());
        }
        response.sendRedirect("select");
    }
}

```

- ä¿®æ”¹ä»£ç 
- æ’ä¸ªæ•°æ®è¯•è¯•

### ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129793686)

### åˆ·æ–°ç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129232631)

- æ’æ²¡æ’æˆåŠŸæ•°æ®ä¸æ¸…æ¥š
- è·³è½¬å®Œæˆäº†
- ä½†æ˜¯SelectServlet.classè¿˜é™·åœ¨è‡ªæˆ‘è·³è½¬çš„å¾ªç¯ä¸­

### è·³å‡ºå¾ªç¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129930678)

- åˆ é™¤è‡ªæˆ‘è·³è½¬
- ä¿å­˜å¹¶ç¼–è¯‘
- tomcatåå°è‡ªåŠ¨åŠ è½½
- å±•ç¤ºæ•°æ®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658129973895)

- åŸºæœ¬å®Œæˆï¼

### æ€»ç»“
- æˆ‘ä»¬è¿™æ¬¡ç ”ç©¶äº†å“åº”é‡å®šå‘
	- ä»ç½‘é¡µçš„ä½ç½®æ’å…¥æ•°æ®å
	- è¿›è¡Œé¡µé¢çš„è·³è½¬
- ä¸è¿‡å¦‚æœæˆ‘æƒ³è¦çš„æ˜¯ä»ç½‘é¡µé‡Œé¢æ–‡æœ¬æ¡†æäº¤æ•°æ®
	- poståˆ°æŒ‡å®šçš„å¤„ç†InsertServlet.class
	- ç„¶åæŠŠæ•°æ®æ’å…¥æ•°æ®åº“
	- è¿™åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220718-1658130065504)
