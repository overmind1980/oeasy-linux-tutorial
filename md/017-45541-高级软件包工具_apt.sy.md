---
show: step
version: 1.0
enable_checker: true
---

# æœ¬ç« å›é¡¾

## æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ ğŸ˜Œ

- ä¸Šæ¬¡äº†è§£äº†dpkg
	- æŸ¥çœ‹åŒ…(package)
	- å®‰è£…åŒ…
- è¿™ä¸ªå‘½ä»¤æ˜¯ubuntuä»ä»–çš„ä¸Šæ¸¸debianä¸Šè·å¾—çš„
- ä¸è¿‡ä¸‹è½½åŒ…ã€ç®¡ç†åŒ…çœŸçš„å¥½éº»çƒ¦
- èƒ½å¦è¿ä¸‹è½½å¸¦ç®¡ç†ä¸€æ¡é¾™éƒ½ç»™åšäº†å‘¢ï¼Ÿ


### å·¥å…·é“¾

- å¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶å¯èƒ½ä¸èƒ½ç”¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634465711818)

- è½¯ä»¶åŒ…ä¹‹é—´æ˜¯æœ‰ä¾èµ–å…³ç³»çš„
	- è¿™ä¸ªè½¯ä»¶åŒ…ä¾èµ–çš„è½¯ä»¶åŒ…ä¸å­˜åœ¨
	- ç”šè‡³è¢«ä¾èµ–çš„è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„è½¯ä»¶åŒ…ä¸å­˜åœ¨
	- è¿™å°±å½¢æˆäº†ä¸€æ¡é“¾è·¯
	- æˆ‘ä»¬å°±éœ€è¦æŠŠè¿™æ¡é“¾è·¯ä¸Šæ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½ä¸‹è½½ä¸‹æ¥
- æœ‰æ²¡æœ‰æ›´ä¾¿æ·çš„æ–¹æ³•å‘¢ï¼Ÿ

### ä¸‹è½½

- å½“ç„¶æœ‰
	- ä½¿ç”¨ apt æŠŠç›¸å…³ä¸‹è½½æ“ä½œå°è£…æˆæ¥å£
	- æˆ‘ä»¬ç›´æ¥è°ƒç”¨ apt å°±å¯ä»¥äº†
	- ä¸ä½†ä¸‹è½½ä½ è¦æ±‚ä¸‹è½½çš„äºŒè¿›åˆ¶æ–‡ä»¶
	- è€Œä¸”ä¸‹è½½è¿è¡Œè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶éœ€è¦çš„å·¥å…·é“¾ä¸Šç›¸å…³çš„äºŒè¿›åˆ¶æ–‡ä»¶
	- æ‰€ä»¥å«åšé«˜çº§åŒ…ç®¡ç†å·¥å…·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662005035709)

- é«˜çº§å°±é«˜çº§åœ¨è¿™äº†
	- å½“ç„¶ä½ å¾—æœ‰åœ°æ–¹ä¸‹è½½é“¾ä¸Šè¿™ä¸€ç³»åˆ—æ–‡ä»¶
	- ä¸‹è½½çš„åœ°æ–¹å°±æ˜¯é•œåƒç«™

### é•œåƒç«™ (mirrors)

- æˆ‘ä»¬å¯ä»¥è‡ªå·±è®¿é—® [debian ç³»çš„é•œè±¡åˆ—è¡¨](https://www.debian.org/mirror/list) 
	- æŸ¥çœ‹å„åœ°çš„é•œåƒåˆ—è¡¨
- æˆ‘ä»¬è‡ªå·±çš„é•œåƒæºè®¾ç½®åœ¨ `/etc/apt/sources.list`
	- cat /etc/apt/sources.list 
	- å»è§‚å¯Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631245850086)

- é•œåƒç«™ä¸€èˆ¬ä¹Ÿä¸åªæä¾›ä¸€ä¸ªå‘è¡Œç‰ˆçš„é•œåƒã€‚
	- é™¤äº†debian
	- ä¹Ÿæœ‰rhelç­‰å…¶ä»–å‘è¡Œç‰ˆä¸Šçš„è½¯ä»¶

### é˜¿é‡Œæº

- å®éªŒæ¥¼é‡Œé¢é»˜è®¤çš„æ˜¯é˜¿é‡Œæº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662018120270)

- é€‰æ‹©ubuntuç³»ç»Ÿ

### é€‰æ‹©ç‰ˆæœ¬

- æƒ³è¦ä¸‹è½½æºçš„æ–‡æœ¬
- è¦é€‰æ‹©é€‰æ‹©ç³»ç»Ÿç‰ˆæœ¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662018198015)

- é‚£æˆ‘æ€ä¹ˆçŸ¥é“
	- ç›®å‰æˆ‘çš„è¿™çš„ç³»ç»Ÿæ˜¯ä»€ä¹ˆç‰ˆæœ¬å‘¢ï¼Ÿ

### å½“å‰ç³»ç»Ÿç‰ˆæœ¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662005600355)

### æ›´æ–°æº

- å½“å‰çš„ç³»ç»Ÿæ˜¯ubuntu16
	- https://developer.aliyun.com/mirror/ubuntu

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662018316134)

- æˆ‘æŠŠè¿™ä¸ªç²˜è´´åˆ°/etc/apt/sources.list å°±è®¾ç½®å¥½äº†

```
deb https://mirrors.aliyun.com/ubuntu/ xenial main
deb-src https://mirrors.aliyun.com/ubuntu/ xenial main

deb https://mirrors.aliyun.com/ubuntu/ xenial-updates main
deb-src https://mirrors.aliyun.com/ubuntu/ xenial-updates main

deb https://mirrors.aliyun.com/ubuntu/ xenial universe
deb-src https://mirrors.aliyun.com/ubuntu/ xenial universe
deb https://mirrors.aliyun.com/ubuntu/ xenial-updates universe
deb-src https://mirrors.aliyun.com/ubuntu/ xenial-updates universe

deb https://mirrors.aliyun.com/ubuntu/ xenial-security main
deb-src https://mirrors.aliyun.com/ubuntu/ xenial-security main
deb https://mirrors.aliyun.com/ubuntu/ xenial-security universe
deb-src https://mirrors.aliyun.com/ubuntu/ xenial-security universe
```
- æˆ‘å¯ä»¥ä»åˆ«çš„æºä¸­è·å–è½¯ä»¶ä¹ˆï¼Ÿ

### æ¸…åæº

- https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230220-1676861972488)

- ç”šè‡³å¯ä»¥ç”¨å‘½ä»¤ä¸€é”®æ¢æº

```
sudo sed -i "s@http://.*archive.ubuntu.com@https://mirrors.tuna.tsinghua.edu.cn@g" /etc/apt/sources.list
sudo sed -i "s@http://.*security.ubuntu.com@https://mirrors.tuna.tsinghua.edu.cn@g" /etc/apt/sources.list
```

- ubuntuæ˜¯debiançš„ä¸‹æ¸¸
	- å¯ä»¥ä½¿ç”¨debiançš„æºå—ï¼Ÿ

### ä¸Šä¸‹æ¸¸

- debianæ˜¯ubuntuçš„ä¸Šæ¸¸
- ç”¨çš„éƒ½æ˜¯aptçš„åŒ…ç®¡ç†å·¥å…·
- æ˜¯å¯ä»¥è®¾ç½®çš„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662017445163)

- ä½†è¦æ‰¾åˆ°ä¸¤è€…ç‰ˆæœ¬ä¹‹é—´çš„å¯¹åº”å…³ç³»

### å¯¹åº”å…³ç³»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662018538407)

- å®éªŒæ¥¼ä¸Šé¢ç”¨çš„æ˜¯ubuntu16.04
- å¯¹åº”ç€debian9(stretch)
- è¿™å›æˆ‘ä»¬å»æ¸…åæºä¸Šå»æ‰¾

### æ‰¾åˆ°é…ç½®

- æ‰¾åˆ°ç³»ç»Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662019094504)

- ç‚¹è¿›å»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662019123091)

- æ‰¾åˆ°å¸®åŠ©

### ç‰ˆæœ¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662019146850)

- è¿™æ ·æ‰¾åˆ°å…·ä½“çš„è·¯å¾„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662019218912)

- ä½†æ˜¯å¦‚æœæˆ‘æƒ³å¤åˆ¶ç›¸å…³æºçš„æ–‡æœ¬å‘¢ï¼Ÿ

### æ¸…åæº

- ä»¥ [æ¸…åé•œåƒç«™](https://mirror.tuna.tsinghua.edu.cn/) ä¸ºä¾‹ï¼š
  - æœ‰å¥½å¤šå‘è¡Œç‰ˆ
  - ç‚¹å‡»debianåé¢é—®å·
  - å¯ä»¥è·å¾— `sources.list` çš„ç›¸å…³æ¸…åæºé…ç½®ä»£ç 

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/mirror.png)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662019313595)

- æˆ‘ä»¬æ€ä¹ˆé€‰çš„
	- æ ¹æ®ç›®å‰çš„ç³»ç»Ÿç‰ˆæœ¬é€‰
	- ç›®å‰æ˜¯ubuntu-16.04å¯¹åº”çš„debian9
- å¦‚æœæ˜¯è‡ªå·±åšæœåŠ¡å™¨çš„è¯
	- å»ºè®®é€‰ç”¨debian
	- é€‰debianå“ªä¸ªç‰ˆæœ¬å‘¢ï¼Ÿ

### ç‰ˆæœ¬é€‰æ‹©

- è¿™é‡Œæœ‰ä¸åŒç‰ˆæœ¬

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634466482300)

- åº”è¯¥é€‰å“ªä¸ªå‘¢ï¼Ÿ

### ä¸»è¦ç‰ˆæœ¬

- https://www.debian.org/distrib/packages

- ä¸»è¦ä¸‰ç±»ç‰ˆæœ¬
	- stable
	- testing
	- unstable

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634466549852)


- è¿™ä¸‰ä¸ªä¸œè¥¿
	- éšç€æ—¶é—´æ¨è¿›æ°´æ¶¨èˆ¹é«˜çš„
	- ä¹Ÿå°±æ˜¯è¯´
	- unstableä¼šè¿›åŒ–æˆtesting
	- testingä¼šè¿›åŒ–æˆstable

- é€‰stableå°±å¾ˆç¨³å½“

### å…·ä½“ç‰ˆæœ¬

- æ¯”stableæ›´ç¨³å½“çš„æ˜¯oldstable

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634466720165)

- oldoldstableå°±æœ‰ç‚¹è¿‡äºç¨³å½“äº†
- å†ç¨³å½“ä¸€ç‚¹å°±è¢«æ·˜æ±°äº†

### å…·ä½“çœ‹çœ‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211216-1639624493462)

- ç‰ˆæœ¬é‡Œæ”¯æŒå„ç§æ¶æ„
- æˆ‘ä»¬è¿™ä¸ªdebian9çš„stretchæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ


### stretch

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634467511937)

- è¿™ä¸ªåå­—æ¥è‡ªäºç©å…·æ€»åŠ¨å‘˜3
- Debianç‰ˆæœ¬çš„åå­—å¤§å¤šæ¥è‡ªäºç©å…·æ€»åŠ¨å‘˜

### ç©å…·æ€»åŠ¨å‘˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634467613830)

- å¾ˆæœ‰è¶£ 
- ä¸æ˜¯ä¹ˆï¼Ÿ
- é™¤äº†é˜¿é‡Œæºã€æ¸…åæºä¹‹å¤–
- è…¾è®¯æºä¹Ÿç±»ä¼¼
- ä¸€èˆ¬æ¥è¯´å’Œä½ è‡ªå·±è½»é‡äº‘æä¾›å•†æœ‰å…³
- ä»è¿‘çš„åœ°æ–¹ä¸‹è½½æ¯”è¾ƒå¿«
- çœ‹çœ‹æºä¸Šéƒ½è®¾ç½®äº†ä»€ä¹ˆğŸ¤ª

### sources.listğŸ—’

- sources.list è¯­æ³•æ˜¯è¿™æ ·çš„
	- deb url distribution component1 component2 component3 [..] componentX
	- deb-src url distribution component1 component2 component3 [..] componentX
- å«ä¹‰
	- deb å¯¹åº”äºŒè¿›åˆ¶æ–‡ä»¶
	- deb-src å¯¹åº”æºæ–‡ä»¶
	- åœ¨åœ°å€åé¢æœ‰ä¸ªç‰ˆæœ¬å·
	- ç‰ˆæœ¬åœ¨ dists(distribution) é‡Œé¢å¯ä»¥æ‰¾åˆ°
	  - <https://mirror.tuna.tsinghua.edu.cn/debian/dists/>
	  - debian ç³»åˆ—ç‰ˆæœ¬å·éƒ½æ˜¯ç©å…·æ€»åŠ¨å‘˜ä¸­çš„è§’è‰²
	  - ubuntu ç‰ˆæœ¬å·æ¥è‡ªäºåŠ¨ç‰© ğŸ¦Š
	  - mainã€contribute æ˜¯æ–‡ä»¶å¤¹çš„åå­—
	  - Buster ç‰ˆæ˜¯æœ€æ–°çš„ç¨³å®šç‰ˆï¼Œé€‚åˆæ‹¿æ¥ä½¿ç”¨
- ç»´æŠ¤è€…ç»´æŠ¤çš„æºå¤´æ˜¯æºæ–‡ä»¶
  - æœ‰äº†æºæ–‡ä»¶ï¼Œå¯ä»¥ç¼–è¯‘æˆåˆ°å„ç§æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
  - ä¿®æ”¹ä¹Ÿæ˜¯ï¼Œå…ˆä¿®æ”¹æºæ–‡ä»¶
- æœ‰ä¸€ä¸ªæºä¸æ˜¯å°±å¤Ÿäº†ä¹ˆ
- ä¸ºä»€ä¹ˆä¼šè®¾ç½®æœ‰å¾ˆå¤šæº
	- ç½‘ç»œä¸ä¸€å®šè¿é€š
	- æ›´å¤šçš„æºæ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä»æ›´å¤šçš„åœ°æ–¹ä¸‹è½½å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…æºæ–‡ä»¶

### å‘¨æœŸ

- å„ç§ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸ

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/release-cycle.png)

### packageğŸ

- è½¯ä»¶åŒ…å‘å¸ƒçš„è¿‡ç¨‹ç”Ÿå‘½å‘¨æœŸï¼š

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/package-lifecycle.png)

### å…¶ä»–å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†å·¥å…·ğŸ§©

- å…¶ä»–å®¶æ—å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†
	- çº¢å¸½ç³»çš„ yum
	- arch ç³»çš„ pacman 
	- ä¹Ÿæ˜¯å¾ˆå¥½çš„ç®¡ç†å·¥å…·
- å¦‚æœæœ‰äº›åŒ…ä½ æ˜¯ä»çº¢å¸½ç³» rpm ä¸‹è½½çš„
  - å¯ä»¥ç”¨ alien è½¬åŒ–ä¸º deb
  - ç„¶åå®‰è£… deb æ–‡ä»¶
  - å…¶å®éƒ½å·®ä¸å¤š

### æ€»ç»“

- æˆ‘ä»¬è¿™é‡Œäº†è§£äº†å¦‚ä½•
	- è®¾ç½®æº
	- æ¢æº
- æˆ‘ä»¬å¯ä»¥ä»æºä¸Šä¸‹è½½å„ç§å¥½ç”¨çš„æœ€æ–°çš„è½¯ä»¶
- äº†è§£äº†ubuntuå’Œdebiançš„ä¸Šä¸‹æ¸¸å…³ç³»
- äº†è§£äº†è·å–æºçš„ä¸€äº›æ–¹æ³•
- æºä¸Šæœ‰æºä»£ç 
- å¯æ˜¯githubä¸Šä¹Ÿæœ‰æºä»£ç 
- æˆ‘å¯ä»¥ä»gitç›´æ¥ä¸‹è½½æºä»£ç 
- ç„¶åç¼–è¯‘å®‰è£…ä¹ˆï¼Ÿ
- å°ä¼™å­ï¼Œä½ è¿™ä¸ªæƒ³æ³•å¾ˆå¯æ€•å•Šï¼ŸğŸ¤” 
- ä¸”å¬ä¸‹ä¸ªå®éªŒå†åˆ†è§£ï¼ğŸ‘‹